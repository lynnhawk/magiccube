# 问卷系统对接

系统对接采用http请求方式，遵循oauth体系，即首先利用平台分配的appid和secretkey进行验证，系统验证成果后即返回token（有实效限制），后续所有请求均以token为身份id进行后续业务调用。

## 身份认证



|类型 | 内容 | 说明|
|--|--|--|
|请求类型|http | |
|测试服务器IP|222.44.18.147 | |
|端口|8080 | |
|url | /getUser/200091 | |
|参数 | | 下列固定内容，不可修改  |
| | u | youcai |
| | o | 1 |
| | p | 1 |
| | loginname| abiuert8634534sdy |
| | password |05d5335d78034e0ab902e9|

完整请求URL即为：

``` html
http://222.44.18.147:8080/getUser/200091?u=pthink&o=1&p=1&loginname=youcai&password=123456&rememberme=0

```


如果调用成功，则返回结果为

``` json

{
"HEAD":{
  "traderef":"fe7a8169ef224c8081ca436a4cccef11",
  "workdate":"20170118","worktime":"161945"
},
"BODY":{
  "pthinkToken":"bbead0d7-c4ce-4679-9e96-00faa3586d43",
  "c":"0",
  "m":"成功"
  }
}


```

如果失败，则返回：

``` json

{
"BODY":{
  "c":"99992", 
  "m":"99992:系统错误[登录名或密码错误]"
  }
}

```

返回结果说明：

| 返回ID | 返回内容 | 说明 |
| -- | -- | -- |
| c | 返回码 | 为0表示调用成功；不为0表示调用错误，错误提示信息在m中 |
|m  | 返回结果 | 返回结果的详细说明|
| pthinkToken | 验证成功后的token | 如果调用成功会有返回值，否则不存在 |

---

注意事项：

* 登录成功后拿到返回报文里的pthinkToken的值放入 查询用户访问地址中

* 登录过期需要重新发送登录报文，重新拿到最新的pthinkToken放入查询用户访问地址中拿数据


## 获取用户列表











